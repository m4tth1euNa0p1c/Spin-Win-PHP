{% extends 'layouts/layout.html.twig' %}

{% block title %}Profil de {{ username }}{% endblock %}

{% block content %}
    {% if temp_message %}
    <div class="temp-message">
        <i class="fas fa-info-circle"></i> {{ temp_message }}
    </div>
    {% endif %}

    {% if error %}
    <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i> {{ error }}
    </div>
    {% endif %}

    <div class="profile-container">
        <div class="profile-box">
            <div class="profile-header">
                <div class="profile-picture">
                    <i class="fas fa-user-circle"></i>
                </div>
                <h1>Bienvenue, {{ username }} !</h1>
                <p>Voici votre profil. Vous êtes maintenant connecté.</p>
            </div>

            <div class="profile-info">
                <h2>Informations :</h2>
                <ul>
                    <li><i class="fas fa-user"></i> <strong>Nom d'utilisateur :</strong> {{ username }}</li>
                    <li><i class="fas fa-envelope"></i> <strong>Email :</strong> {{ email }}</li>
                    <li><i class="fas fa-shield-alt"></i> <strong>Rôle :</strong> {{ role }}</li>
                    <li><i class="fas fa-coins"></i> <strong>Crédits :</strong> <span id="user-coins">{{ coins }}</span> EFREICOIN</li>
                </ul>
            </div>

            <div class="profile-actions">
                <a href="{{ path('logout') }}" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Se déconnecter
                </a>
            </div>

            {# Optionnel : Formulaire de mise à jour du profil #}
            <div class="profile-update">
                <h2><i class="fas fa-edit"></i> Mettre à Jour le Profil :</h2>
                <form action="{{ path('update_profile') }}" method="post">
                    <div class="form-group">
                        <label for="username"><i class="fas fa-user"></i> Nom d'utilisateur</label>
                        <input type="text" id="username" name="username" value="{{ username }}" required>
                    </div>
                    <div class="form-group">
                        <label for="email"><i class="fas fa-envelope"></i> Adresse E-mail</label>
                        <input type="email" id="email" name="email" value="{{ email }}" required>
                    </div>
                    <div class="form-group">
                        <label for="password"><i class="fas fa-lock"></i> Nouveau Mot de Passe (laisser vide pour ne pas changer)</label>
                        <input type="password" id="password" name="password" placeholder="Nouveau mot de passe">
                    </div>
                    <div class="form-group">
                        <label for="confirm_password"><i class="fas fa-lock"></i> Confirmer le Mot de Passe</label>
                        <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirmer le mot de passe">
                    </div>
                    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                    <button type="submit"><i class="fas fa-save"></i> Mettre à Jour</button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

